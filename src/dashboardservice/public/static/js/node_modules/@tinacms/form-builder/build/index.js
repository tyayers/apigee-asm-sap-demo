!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-final-form"),require("@tinacms/react-core"),require("styled-components"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","react-final-form","@tinacms/react-core","styled-components","prop-types"],t):t((e=e||self)["@tinacms/form-builder"]={},e.React,e.reactFinalForm,e.reactCore,e.styled,e.PropTypes)}(this,function(e,p,f,n,t,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r;function a(e){var t=e.form,n=e.children,r=p.useState(0),o=r[0],i=r[1];return p.useEffect(function(){i(function(e){return e+1})},[t]),p.createElement(l,{form:t.finalForm,key:o+": "+t.id},n)}var l=f.Form,c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var o,i,u,d=t.div.withConfig({displayName:"FieldsGroup",componentId:"sc-rpstjm"})(u||(o=["\n  position: relative;\n  display: block;\n  width: 100%;\n  height: 100%;\n  padding: 20px 20px 0 20px;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: auto !important;\n"],i=["\n  position: relative;\n  display: block;\n  width: 100%;\n  height: 100%;\n  padding: 20px 20px 0 20px;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: auto !important;\n"],Object.defineProperty?Object.defineProperty(o,"raw",{value:i}):o.raw=i,u=o));function m(e,t,n){var r=t[e];return!r&&n&&n[e]&&(r=n[e]),r}var s=p.createContext(!1);function y(e){var r=e.Component,t=e.children,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["Component","children"]);return p.useContext(s)?p.createElement(f.Field,c({},o),function(e){var t=e.input,n=e.meta;return p.createElement(r,c({input:t,meta:n},o))}):t||null}y.propTypes={name:r.string,type:r.string,Component:r.any.isRequired,children:r.any},e.FieldsBuilder=function(e){var l=e.form,t=e.fields,u=n.useCMS();return p.createElement(d,null,t.map(function(r){if(null===r.component)return null;var e,t=u.plugins.findOrCreateMap("field").find(r.component);t&&t.type&&(e=t.type);var n=m("parse",r,t),o=m("validate",r,t),i=r.format;!i&&t&&t.format&&(i=t.format);var a=r.defaultValue;return!n&&t&&t.defaultValue&&(a=t.defaultValue),p.createElement(f.Field,{name:r.name,key:r.name,type:e,parse:n?function(e,t){return n(e,t,r)}:void 0,format:i?function(e,t){return i(e,t,r)}:void 0,defaultValue:a,validate:function(e,t,n){if(o)return o(e,t,n,r)}},function(e){return"string"!=typeof r.component&&null!==r.component?p.createElement(r.component,c({},e,{form:l.finalForm,tinaForm:l,field:r})):t?p.createElement(t.Component,c({},e,{form:l.finalForm,tinaForm:l,field:r})):p.createElement("p",null,"Unrecognized field type")})}))},e.FieldsGroup=d,e.FormBuilder=a,e.TinaField=y,e.TinaForm=function(e){var t=e.form,n=e.children,r=p.useState(!1),o=r[0],i=r[1];return t?p.createElement(s.Provider,{value:o},p.createElement(a,{form:t},function(){return n({isEditing:o,setIsEditing:i})})):p.createElement(s.Provider,{value:o},n({isEditing:o,setIsEditing:i}))},Object.defineProperty(e,"__esModule",{value:!0})});
